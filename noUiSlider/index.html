<!DOCTYPE html>
<html>
<head>
	<title></title>
	<link href="node_modules/nouislider/dist/nouislider.css" rel="stylesheet">
	<script src="node_modules/nouislider/dist/nouislider.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<style type="text/css">
		#slider {
			width: 50%;
			margin: auto;
			margin-top: 50px;
		}

		#rangeSelection {
			width: 50%;
			margin: auto;
			margin-top: 10px;
		}
	</style>
</head>
<body>
	<div id="slider"></div>
	<br>
	<div id="rangeSelection">
	    <select id="min" style="width: 300px;"></select>
	    <select id="max" style="width: 300px;"></select>
	</div>
    <br><br>
    <div id="myTable"></div>
	<script type="text/javascript">

		function httpGet(theUrl) {
		    var xmlHttp = new XMLHttpRequest();
		    xmlHttp.open( "GET", theUrl, false ); // false for synchronous request
		    xmlHttp.send( null );
		    return xmlHttp.responseText;
		}


		let minAndMaxRange = JSON.parse(httpGet("http://localhost/php_21_sep/nouislider/api.php"));

		// console.log(minAndMaxRange);

		// console.log(minAndMaxRange.min_price);
		// console.log(minAndMaxRange.max_price);

		var slider = document.getElementById('slider');

		console.log(slider);

		noUiSlider.create(slider, {
		    start: [parseInt(minAndMaxRange.min_price), parseInt(minAndMaxRange.max_price)],
		    connect: true,
		    step: (parseInt(minAndMaxRange.max_price)-parseInt(minAndMaxRange.min_price))/6,
		    range: {
		        'min': parseInt(minAndMaxRange.min_price),
		        'max': parseInt(minAndMaxRange.max_price)
		    }
		});


		// console.log(noUiSlider);

		$(document).ready(function(){

			function optionDropdown(value) {
				htmlOptionValue = '';
			    for (let price = 1000; price <= 2000;) {

			    	if(value=='max') {
			    		if (price == 2000) {
			            	var selected = "selected";
				        } else {
				            selected = '';
				        }
			    	}
			        htmlOptionValue += "<option value='" + price + "' " + selected + ">" + price + "</option>";

			        price = price + 200;
			    }

			    return htmlOptionValue;
			}

			$("#min").html(optionDropdown("min"));
			$("#max").html(optionDropdown("max"));


			slider.noUiSlider.on("change", function() {
				console.log(slider.noUiSlider.get());
			});



		});
	</script>
</body>
</html>